<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Faraday-Firmware: RF_Network_Stack/rf.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Faraday-Firmware
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Firmware for the Faraday digital amateur radio</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('rf_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">RF_Network_Stack/rf.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="rf_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00013"></a>00013 <span class="preprocessor">#ifndef RF_NETWORK_STACK_RF_H_</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#define RF_NETWORK_STACK_RF_H_</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 
<a name="l00021"></a><a class="code" href="rf_8h.html#adfacf11b3be128e414d637166fca7567">00021</a> <span class="preprocessor">#define TX_PACKET_LEN 61 </span>
<a name="l00022"></a><a class="code" href="rf_8h.html#aea235bffdae511bee6b73edb73252f8f">00022</a> <span class="preprocessor">#define RX_PACKET_LEN 61 </span>
<a name="l00023"></a><a class="code" href="rf_8h.html#a0d0257a1204cc0bf53ed170143863f99">00023</a> <span class="preprocessor">#define RX_PKT_HANDLE_APPEND_LEN 2 </span>
<a name="l00035"></a><a class="code" href="rf_8h.html#a6fd80036879a765fd8556c7971656eeb">00035</a> <span class="preprocessor">#define RF_DATALINK_PACKET_PAYLOAD_LEN 62 </span>
<a name="l00036"></a><a class="code" href="rf_8h.html#af1c747039731408e5511ebe7324c281c">00036</a> <span class="preprocessor">#define RF_DATALINK_PACKET_FIFO_COUNT 5 </span>
<a name="l00037"></a><a class="code" href="rf_8h.html#a270c74398a4371b42cf262a2c9f85212">00037</a> <span class="preprocessor">#define RF_DATALINK_PACKET_RX_FOOTER_LEN 2 </span>
<a name="l00049"></a><a class="code" href="rf_8h.html#a4ed8b16dab532682df572be27abc6f10">00049</a> <span class="preprocessor">#define RF_DATALINK_PKT_SOURCE_CALLSIGN_LOC 0 </span>
<a name="l00050"></a><a class="code" href="rf_8h.html#a50f2b5d5f4bdff2c0a073f4ad2e62f9e">00050</a> <span class="preprocessor">#define RF_DATALINK_PKT_SOURCE_CALLSIGN_LOC_LEN 6 </span>
<a name="l00051"></a><a class="code" href="rf_8h.html#a36ffc720613868838b85d62e291edd32">00051</a> <span class="preprocessor">#define RF_DATALINK_PKT_SOURCE_CALLSIGN_ID_LOC 6 </span>
<a name="l00052"></a><a class="code" href="rf_8h.html#a227a2400fc614f44a6e64de6a8c8fc04">00052</a> <span class="preprocessor">#define RF_DATALINK_PKT_DESTINATION_CALLSIGN_LOC 7 </span>
<a name="l00053"></a><a class="code" href="rf_8h.html#afcdab5fc5a316b1cb554e1dc372ff31f">00053</a> <span class="preprocessor">#define RF_DATALINK_PKT_DESTINATION_CALLSIGN_LOC_LEN 6 </span>
<a name="l00054"></a><a class="code" href="rf_8h.html#a97d84502db3e60cd048c4fdfee45f1f7">00054</a> <span class="preprocessor">#define RF_DATALINK_PKT_DESTINATION_CALLSIGN_ID_LOC 13 </span>
<a name="l00055"></a><a class="code" href="rf_8h.html#af178b9b827284b5253be02721051a0c9">00055</a> <span class="preprocessor">#define RF_DATALINK_PKT_PKT_TYPE_LOC 14 </span>
<a name="l00056"></a><a class="code" href="rf_8h.html#ae77c020643215a182081ef89c9267f80">00056</a> <span class="preprocessor">#define RF_DATALINK_PKT_PKT_CONFIG_LOC 15 </span>
<a name="l00057"></a><a class="code" href="rf_8h.html#a9c2379b8717cfb1b5a28efec2d6f49fe">00057</a> <span class="preprocessor">#define RF_DATALINK_PKT_PKT_LEN_LOC 16 </span>
<a name="l00058"></a><a class="code" href="rf_8h.html#a10cf11e83cd144c4f053c8a3415ae1ec">00058</a> <span class="preprocessor">#define RF_DATALINK_PKT_PAYLOAD_LOC 17 </span>
<a name="l00059"></a><a class="code" href="rf_8h.html#a70e9288584e5013ced9734dc9f0a14d6">00059</a> <span class="preprocessor">#define RF_DATALINK_PKT_PAYLOAD_LEN 44 </span>
<a name="l00060"></a><a class="code" href="rf_8h.html#adfd54b86c3faba855ab0c16fa752e06f">00060</a> <span class="preprocessor">#define RF_DATALINK_PKT_LQI_LOC 61 </span>
<a name="l00061"></a><a class="code" href="rf_8h.html#a2f1e1fe9b4358eaff447bd9099543aa9">00061</a> <span class="preprocessor">#define RF_DATALINK_PKT_RSSI_LOC 62 </span>
<a name="l00073"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html">00073</a> <span class="preprocessor">typedef struct RF_L2_PACKET {</span>
<a name="l00074"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#afe0ac1375d59bc70dae7f673c5e1e521">00074</a> <span class="preprocessor"></span>    <span class="keywordtype">char</span> source_callsign[<a class="code" href="rf_8h.html#a50f2b5d5f4bdff2c0a073f4ad2e62f9e">RF_DATALINK_PKT_SOURCE_CALLSIGN_LOC_LEN</a>]; 
<a name="l00075"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#adcc7d59335f6feaf632c7b060dacf931">00075</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#adcc7d59335f6feaf632c7b060dacf931">source_identifier</a>; 
<a name="l00076"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#a1e8031a98811768b4efefc24fa2c3c2b">00076</a>     <span class="keywordtype">char</span> destination_callsign[6]; 
<a name="l00077"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#a41d679cf9aef19de7045035ddb5ae7ac">00077</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#a41d679cf9aef19de7045035ddb5ae7ac">destination_identifier</a>; 
<a name="l00078"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#aa37c21a668f2ff9e21989b8c16e90b60">00078</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#aa37c21a668f2ff9e21989b8c16e90b60">packet_type</a>; 
<a name="l00079"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#ad678fca2693228ffdcc8762383872ab6">00079</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#ad678fca2693228ffdcc8762383872ab6">packet_config</a>; 
<a name="l00080"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#afb70208d345a35655a0e9afcbfd1321d">00080</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#afb70208d345a35655a0e9afcbfd1321d">payload_length</a>; 
<a name="l00081"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#aed43a81e0ce9760eef9ff1443db6242d">00081</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> payload[44]; 
<a name="l00082"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#abe6df2db257c56411dfaa06c284ab140">00082</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#abe6df2db257c56411dfaa06c284ab140">rssi</a>; 
<a name="l00083"></a><a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#a21036977cef7bf696438db4357c15424">00083</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html#a21036977cef7bf696438db4357c15424">lqi</a>; 
<a name="l00084"></a>00084 } <a class="code" href="rf_8h.html#a35cca4d9b7aac8755a34f91bcac89139" title="Layer 2 packet structure.">RF_DATALINK_PACKET_STRUCT</a>;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 
<a name="l00093"></a>00093 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a4ffcdc7ec9b5d850ad08052452aa826c">init_radio_faraday</a>(<span class="keywordtype">void</span>);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 
<a name="l00104"></a>00104 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a8cc560dfe983937d7aa2f05080040a07" title="Load default CC430 frequency Update the CC430 HAL &quot;RfSettings&quot; frequency registers definitions with s...">radio_load_default_frequency</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> freq2, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> freq1, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> freq0);
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 
<a name="l00112"></a>00112 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a23aaf193313164f03f3b2025a2d7e7cd" title="Initialize layer 2 radio FIFO buffers.">init_rf_fifo</a>(<span class="keywordtype">void</span>);
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 
<a name="l00119"></a>00119 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a5e5481c3eefc3a661d7b0c0393de05bd" title="Perform CC430 radio module manual calibration Perform CC430 radio module manual calibration routine t...">radio_manual_calibration_idle</a>(<span class="keywordtype">void</span>);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 
<a name="l00127"></a>00127 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a59792c6361b90d6430934955c3b39f45">radio_manual_idle</a>(<span class="keywordtype">void</span>);
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 
<a name="l00135"></a>00135 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a5745dbf0b29892d2ff4148e61b26ca71">TransmitOn</a>(<span class="keywordtype">void</span>);
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 
<a name="l00146"></a>00146 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a1d4792ecc82c8946e81fb82db3f7be82" title="Place data into the CC430 packet handling hardware and transmit the data.">Transmit</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buffer, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> length);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148 
<a name="l00154"></a>00154 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a6016f0e70f4b3cd74db476e3bd55189e">ReceiveOn</a>(<span class="keywordtype">void</span>);
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 
<a name="l00162"></a>00162 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a0cc0d5e5853672c1dad2de570e667c40" title="Perform routine routine to disable both CC430 and external amplifier for receive opertion.">ReceiveOff</a>(<span class="keywordtype">void</span>);
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 
<a name="l00171"></a>00171 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#af01546119618d41972550782b7966087" title="A function that holds the routines needed to operation the ISR.">radio_isr</a>(<span class="keywordtype">void</span>);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 
<a name="l00182"></a>00182 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a0f0f691b3602da77a99b896b04c595ef" title="Function used to place data to be transmitted into the transmit FIFO buffer.">rf_tx_put_packet_buffer</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *packet_data_pointer, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> length);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 
<a name="l00191"></a>00191 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#acfb42fbc4d7d5dcb68b5ffd51ebb7c77" title="Gets the next packet in the transmit FIFO and transmits it.">rf_get_next_tx_fifo</a>(<span class="keywordtype">void</span>);
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 
<a name="l00201"></a>00201 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="rf_8c.html#a71bf2ac560942d4d24679117f870ad18" title="Check if a packet is waiting in the transmit FIFO.">rf_check_tx_fifo</a>(<span class="keywordtype">void</span>);
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 
<a name="l00210"></a>00210 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a96a68ee87e7d09faf730a2b2c4592445" title="Main housekeeping routine function.">rf_housekeeping</a>(<span class="keywordtype">void</span>);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 
<a name="l00231"></a>00231 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="rf_8c.html#abcc24ad8b2820c3b67da03b6a0bed6f9" title="Fill rf_datalink_packet_tx_struct with data to create a layer 2 transmit packet.">rf_tx_datalink_packet</a>(<span class="keywordtype">char</span> *src_callsign, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> src_callsign_len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> src_callsign_id, <span class="keywordtype">char</span> *dest_callsign, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dest_callsign_len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dest_callsign_id, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> packet_type, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> packet_config, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> payload_len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *payload);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 
<a name="l00237"></a>00237 <span class="comment">//void rf_send_test_rf_1(void);</span>
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 
<a name="l00247"></a>00247 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a664363319e5af4971ddbc90101fa9dca" title="Abstraction function used to place a transmit packet into the transmit FIFO.">rf_rawpacket_tx</a>(<a class="code" href="struct_r_f___l2___p_a_c_k_e_t.html" title="Layer 2 packet structure.">RF_DATALINK_PACKET_STRUCT</a> *packet_data_pointer); <span class="comment">// 2/23/2016 - BSALMI - I think this is how we should move to passing structs!</span>
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 
<a name="l00258"></a>00258 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a41c522c3862f140d95ebf47fc276daea" title="Parse a received layer 2 packet.">rf_datalink_parse</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *packet);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 
<a name="l00271"></a>00271 <span class="keywordtype">void</span> <a class="code" href="rf_8c.html#a65b1f6e58bc730f0ac8f5f6b8800b92b" title="Update the current RF frequency.">CC430_Program_Freq</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> freq2, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> freq1, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> freq0);
<a name="l00272"></a>00272 
<a name="l00281"></a>00281 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="rf_8c.html#ac4329f7f8a45f977a3b5d15b899418d4" title="Check the RF layer 2 transmitting flag byte.">CC430_Check_Transmitting_Flag</a>(<span class="keywordtype">void</span>);
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="preprocessor">#endif </span><span class="comment">/* RF_NETWORK_STACK_RF_H_ */</span>
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="rf_8h.html">rf.h</a>      </li>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
